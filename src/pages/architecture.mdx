export const title = "Архитектура";

# Архитектура Triangle Framework

Triangle Framework — это модульный высокопроизводительный PHP-фреймворк, построенный на основе [Localzet Server](https://github.com/localzet/Server). Фреймворк разработан для замены традиционной архитектуры PHP-FPM и предназначен для разработки веб-приложений, HTTP-интерфейсов и микросервисов.

## Общая структура

Triangle Framework состоит из следующих основных компонентов:

### Ядро (Engine)

**`triangle/engine`** — это базовое ядро фреймворка, которое предоставляет:

- Абстракцию приложения (`Triangle\Engine\App`)
- Контейнер зависимостей (`Triangle\Engine\Container`)
- Систему конфигурации (`Triangle\Engine\Config`)
- Обработку запросов и ответов (`Triangle\Engine\Request`, `Triangle\Engine\Response`)
- Систему исключений и обработчиков ошибок
- Поддержку плагинов и автозагрузки
- Вспомогательные функции (кэширование, логирование, переводы)

### Компоненты (Components)

Модульные библиотеки, расширяющие функциональность ядра:

- **`triangle/console`** — консольные команды и CLI-инструменты
- **`triangle/router`** — система маршрутизации
- **`triangle/middleware`** — промежуточное ПО (middleware)
- **`triangle/database`** — работа с базами данных (на основе Illuminate Database)
- **`triangle/view`** — система шаблонизации
- **`triangle/session`** — управление сессиями
- **`triangle/events`** — система событий
- **`triangle/cron`** — планировщик задач

### Движки (Engines)

Слои приложений, построенные на основе Engine:

- **`triangle/engine-http`** — HTTP-слой для обработки HTTP-запросов
- **`triangle/engine-ws`** — WebSocket-слой для работы с WebSocket-соединениями

**Важно:** Движки `engine-http` и `engine-ws` являются взаимоисключающими (не могут использоваться одновременно).

### Плагины (Plugins)

Дополнительные модули расширения:

- **`triangle/oauth`** — OAuth-аутентификация с поддержкой множества провайдеров
- **`triangle/media`** — обработка медиа-файлов
- **`triangle/pusher`** — система push-уведомлений
- **`triangle/multiconnect`** — шлюз для множественных подключений

### Фреймворки (Frameworks)

Готовые рабочие окружения:

- **`triangle/web`** — полнофункциональный HTTP-фреймворк (MVC)
- **`triangle/ws`** — WebSocket-фреймворк для real-time приложений

## Принцип модульности

Triangle Framework построен по принципу модульности:

1. **Независимость компонентов** — каждый компонент может использоваться отдельно
2. **Единое ядро** — все компоненты основаны на `triangle/engine`
3. **Гибкая конфигурация** — система конфигурации позволяет настраивать каждый компонент отдельно
4. **Плагинная архитектура** — легко расширяется через систему плагинов

## Жизненный цикл приложения

```
1. Запуск сервера (Localzet Server)
   ↓
2. Инициализация Engine (Triangle\Engine\App)
   ↓
3. Загрузка конфигурации (Triangle\Engine\Config)
   ↓
4. Автозагрузка компонентов (Triangle\Engine\Autoload)
   ↓
5. Bootstrap компонентов (Triangle\Engine\Bootstrap)
   ↓
6. Регистрация маршрутов
   ↓
7. Обработка запросов через middleware
   ↓
8. Выполнение контроллеров
   ↓
9. Генерация ответа
```

## Преимущества архитектуры

- **Производительность** — основан на Localzet Server, работает без PHP-FPM
- **Модульность** — используйте только нужные компоненты
- **Расширяемость** — легко добавлять плагины и компоненты
- **Масштабируемость** — поддержка микросервисов и распределенных систем
- **Современный PHP** — требует PHP 8.1+, использует современные возможности языка

